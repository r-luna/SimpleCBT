!function(e,t){e.init=function(){document.ontouchmove=function(e){e.preventDefault()},palcare.controller.subscribe("mouseup",palcare.controller.doNextSlide),palcare.controller.subscribe("mouseup",palcare.controller.doPreviousSlide),palcare.controller.subscribe("mouseup",palcare.controller.doQuestionBtn),t("body").on("mouseup",".btn",palcare.controller.notify),t.ajaxSetup({error:function(e,t,n){console.log("?",t,n)}}),palcare.model.loadTemplates(),palcare.model.loadData(),palcare.model.checkForCompleteLoad()},t(function(){palcare.init()})}(this.palcare=this.palcare||{},jQuery),function(e,t){var n={},a=!1;e.setIsViewRendered=function(e){a=e},e.subscribe=function(e,t){n.hasOwnProperty(e)||(n[e]=[]),n[e].push(t)},e.unsubscribe=function(){console.log("palcar.controller.unsibscrobe")},e.notify=function(e){if(!t(e.target).data("action")){for(var o=e.target,i=0;!t(o).data("action")&&5!=i;)o=t(o).parent(),++i;if(!t(o).data("action"))return;e.target=o}if(!a)return void e.preventDefault();for(var l=n[e.type],r=0;r<l.length;r++)l[r](e)},e.changeButtonState=function(e){("touchstart"===t(e.type)&&"mousedown"===t(e.type)||t(e.target).hasClass("btn"))&&(t(e.target).hasClass("btn_disabled")||palcare.util.doChangeButtonState(e))},e.revertButtonState=function(e){("touchend"===e.type||"mouseup"===e.type)&&palcare.util.doRevertButtonState(e)},e.doNextSlide=function(n){var a=palcare.model.getCurrentSlide(),o=palcare.model.getData().slides.slide.length;"doNextSlide"===t(n.target).data("action")&&a+1!==o&&(e.setIsViewRendered(!1),palcare.model.setNextSlide(),palcare.view.loadSlide())},e.doPreviousSlide=function(e){var n=palcare.model.getCurrentSlide();"doPreviousSlide"===t(e.target).data("action")&&0!==n&&(palcare.model.setPreviousSlide(),palcare.view.loadSlide())},e.doQuestionBtn=function(e){"doQuestionBtn"===t(e.target).data("action")&&palcare.view.sendAnswer(e)}}(this.palcare.controller=this.palcare.controller||{},jQuery),function(e,t){var n=0,a={content:null,multi:null,"boolean":null,modal:null,endscreen:null},o=null,i={};e.setScore=function(e,t){i["slide"+n]={slidendx:n,iscorrect:e,answerndx:t},console.log(i)},e.getSpecificScore=function(e){return i["slide"+e]},e.loadData=function(){t.ajax({type:"GET",url:"scripts/data.xml",cache:!1,dataType:"text",success:function(e,t,n){var a=new X2JS;o=a.xml_str2json(e).data}})},e.getCurrentSlide=function(){return n},e.getData=function(){return o},e.setNextSlide=function(){n++},e.setPreviousSlide=function(){n--},e.loadTemplates=function(){t.get("templates/content_tpl.html",function(e){a.content=t("<div></div>").append(t(t.parseHTML(e)).find("#interactive").html())}),t.get("templates/modal_tpl.html",function(e){a.modal=t("<div></div>").append(t(t.parseHTML(e)).find("#interactive").html())}),t.get("templates/multiple_choice_tpl.html",function(e){a.multi=t("<div></div>").append(t(t.parseHTML(e)).find("#interactive").html())}),t.get("templates/boolean_tpl.html",function(e){a["boolean"]=t("<div></div>").append(t(t.parseHTML(e)).find("#interactive").html())}),t.get("templates/end_screen_tpl.html",function(e){a.endscreen=t("<div></div>").append(t(t.parseHTML(e)).find("#interactive").html())})},e.checkForCompleteLoad=function(){var e=!0;for(var t in a)a[t]||(e=!1);return null===o&&(e=!1),e?void palcare.view.loadSlide():(console.log("loading..."),void window.setTimeout(palcare.model.checkForCompleteLoad,200))},e.setCurrentSlide=function(e){n=e},e.getTemplate=function(e){return a[e]}}(this.palcare.model=this.palcare.model||{},jQuery),function(e,t){var n,a=500,o={content:function(){function e(){i.contentObj.synchedcontent.content[i.synchedIndex];t("#textBox").removeClass("fadeIn"),i.timer=window.setTimeout(n,a)}function n(){var n=i.contentObj.synchedcontent.content[i.synchedIndex],a=i.contentObj.synchedcontent.content.length;t("#textBox").html(n.toString()),t("#textBox").addClass("fadeIn"),i.synchedIndex!==a-1?(i.synchedIndex++,i.timer=window.setTimeout(e,parseInt(n._time))):console.log("done")}function o(){var e=palcare.model.getTemplate("content");e.find("#topHeaderWrapper").html(i.contentObj._title),t("#interactive").html(e.html()),palcare.controller.setIsViewRendered(!0)}var i=this;this.contentObj=null,this.synchedIndex=0,this.timer=null,this.pause=function(){window.clearTimeout(i.timer)},this.resume=function(){var t=i.contentObj.synchedcontent.content[i.synchedIndex];i.timer=window.setTimeout(e,t._time)},this.unload=function(){window.clearInterval(i.timer),i.timer=null},this.init=function(e){i.contentObj=e;var a=i.contentObj.synchedcontent.content[i.synchedIndex];t("#interactive").addClass("fadeIn"),o(),i.timer=window.setTimeout(n,parseInt(a._time))}},"boolean":function(){function e(){var e=palcare.model.getTemplate("boolean");e.find("#questionTitle").html(n.contentObj._title),e.find("#textBox2").html(n.contentObj.question.toString()),e.find("#answer0").attr("data-isanswer","true"===n.contentObj.answer?!0:!1),e.find("#answer1").attr("data-isanswer","true"===n.contentObj.answer?!1:!0),t("#interactive").html(e.html()),t("#interactive").addClass("fadeIn"),palcare.controller.setIsViewRendered(!0)}var n=this,a=!1;this.contentObj=null,this.unload=function(){},this.handleAnswer=function(e){if(!a){var n=t(e.target).data("isanswer"),o=t(e.target).data("answerndx");palcare.model.setScore(n,o),a=!0}},this.init=function(t){n.contentObj=t,e(),console.log(t)}},multiplechoice:function(){function e(){var e=palcare.model.getTemplate("multi"),a=n.contentObj.answers.answer;e.find("#questionSubTitle").html(n.contentObj.subtitle),e.find("#questionMainTitle").html(n.contentObj._title),e.find("#questiontext").html(n.contentObj.question.toString());for(var o=0;o<a.length;o++)e.find("#answer"+o).html(a[o].toString()),e.find("#answerWrapper"+o).attr("data-isanswer",a[o]._iscorrect),e.find("#answerWrapper"+o).attr("data-answerndx",o);t("#interactive").html(e.html()),t("#interactive").addClass("fadeIn"),palcare.controller.setIsViewRendered(!0)}var n=this,a=!1;this.contentObj=null,this.handleAnswer=function(e){if(!a){var n=t(e.target).data("isanswer"),o=t(e.target).data("answerndx");palcare.model.setScore(n,o),a=!0}},this.unload=function(){},this.init=function(t){n.contentObj=t,e()}}};e.loadSlide=function(){var e=palcare.model.getData().slides.slide[palcare.model.getCurrentSlide()];t("#interactive").removeClass("fadeIn"),void 0!==n&&n.unload(),window.setTimeout(function(){n=new o[e._slidetype],n.init(e)},a)},e.sendAnswer=function(e){n.handleAnswer(e)},e.insertModal=function(){}}(this.palcare.view=this.palcare.view||{},jQuery);